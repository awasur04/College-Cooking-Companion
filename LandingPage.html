<!DOCTYPE html>

<html lang="en">

<head>

  <title>College Cook Companion</title>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <meta name="College Cook Companion" content="Recipes for those on a budget" />
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

</head>

<body>
    <div id="app">
    <h1>Welcome to the College Cook Companion</h1>
    <button v-on:click="userSignIn()">{{ userLoginStatus }}</button>
    <button v-on:click="userCreateFavorites()">{{ createNewOrFavorites }}</button>
    <h1></h1>
    <textarea id="ingredientsField">Enter ingredients you have</textarea>
    <button v-on:click="saveIngredients()">Save ingredients</button>
    <textarea id="parametersField">Special parameters</textarea>
    <button v-on:click="saveParameters()">Save parameters</button>
    <h2></h2>
    <button>Get free recipes</button>
    <button>Get recipes with shopping</button>
    <h2></h2>
    </div>
    

</body>

<script>

    var app = new Vue({
        el: "#app",
        data: {
            loggedIn: false,
            userLoginStatus: "",
            createNewOrFavorites: ""
        },
        methods: {
            logout() {
                this.saveAll();
                sessionStorage.removeItem("UUID");
                window.location.href = "LandingPage.html"; // Test redirect 
            },
            login() {
                window.location.href = "Login.html";
            },
            userSignIn() {
                if(this.loggedIn) {
                    this.logout();
                } else {
                    this.login();
                }
            },
            newUser() {
                window.location.href = "CreateAccount.html";
            },
            favorites() {
                this.saveAll();
                window.location.href = "Favorites.html";
            },
            userCreateFavorites() {
                if(this.loggedIn) {
                    this.favorites();
                } else {
                    this.favorites();
                }
            },
            saveIngredients() {
                var ing = document.getElementById("ingredientsField").value;
                sendData(ing);
            },
            saveParameters() {
                var param = document.getElementById("parametersField").value;
                sendData(param);
            },
            saveAll() {
                this.saveIngredients();
                this.saveParameters();
            },
            sendData(obj) {
                // TODO Send the object to the server
            }

        },
        beforeMount(){
            if(sessionStorage.getItem("UUID") != 0 && sessionStorage.getItem("UUID") != null) {
                this.loggedIn = true;
                this.userLoginStatus = "Logout";
                this.createNewOrFavorites = "Favorites";
            } else {
                this.userLoginStatus = "Login";
                this.createNewOrFavorites = "Signup";
            }
        }
    })

</script>

</html>