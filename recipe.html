<html>

<head>
    <title>College Cook Companion</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="College Cook Companion" content="Recipies for those on a budget"/>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <h1>{{ message }}</h1>
        <h1></h1>
        <table v-html="rows" id="app"></table>
        <button v-on:click="updateMessage()">Update</button>
    </div>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                rows: '',
                recipeNumber: [],
                message: 'College Cooking Companion recipes list',
                recipesReturned: [{
                    "id": 639492,
                    "title": "Cinnamon Twists",
                    "image": "https://spoonacular.com/recipeImages/639492-312x231.jpg",
                    "imageType": "jpg",
                    "usedIngredientCount": 4,
                    "missedIngredientCount": 0,
                    "missedIngredients": [],
                    "usedIngredients": [
                        {
                            "id": 18375,
                            "amount": 1.0,
                            "unit": "package",
                            "unitLong": "package",
                            "unitShort": "pkg",
                            "aisle": "Baking",
                            "name": "active yeast",
                            "original": "1 package active dry yeast",
                            "originalName": "active dry yeast",
                            "meta": [
                                "dry"
                            ],
                            "extendedName": "dry active yeast",
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/yeast-granules.jpg"
                        },
                        {
                            "id": 1001,
                            "amount": 1.0,
                            "unit": "cup",
                            "unitLong": "cup",
                            "unitShort": "cup",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "butter",
                            "original": "cup butter or margarine",
                            "originalName": "butter or margarine",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg"
                        },
                        {
                            "id": 1123,
                            "amount": 2.0,
                            "unit": "",
                            "unitLong": "",
                            "unitShort": "",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "eggs",
                            "original": "2 eggs",
                            "originalName": "eggs",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/egg.png"
                        },
                        {
                            "id": 1077,
                            "amount": 1.0,
                            "unit": "cup",
                            "unitLong": "cup",
                            "unitShort": "cup",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "milk",
                            "original": "1 cup milk",
                            "originalName": "milk",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/milk.png"
                        }
                    ],
                    "unusedIngredients": [],
                    "likes": 9
                },
                {
                    "id": 635788,
                    "title": "Braided Sweet Bread",
                    "image": "https://spoonacular.com/recipeImages/635788-312x231.jpg",
                    "imageType": "jpg",
                    "usedIngredientCount": 4,
                    "missedIngredientCount": 0,
                    "missedIngredients": [],
                    "usedIngredients": [
                        {
                            "id": 1001,
                            "amount": 1.0,
                            "unit": "stick",
                            "unitLong": "stick",
                            "unitShort": "stick",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "butter",
                            "original": "1 stick of butter",
                            "originalName": "butter",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg"
                        },
                        {
                            "id": 18375,
                            "amount": 0.25,
                            "unit": "oz",
                            "unitLong": "ounces",
                            "unitShort": "oz",
                            "aisle": "Baking",
                            "name": "dry yeast",
                            "original": "2 pkg. (¼ oz.) dry yeast",
                            "originalName": "pkg. dry yeast",
                            "meta": [
                                "dry"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/yeast-granules.jpg"
                        },
                        {
                            "id": 1123,
                            "amount": 3.0,
                            "unit": "",
                            "unitLong": "",
                            "unitShort": "",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "eggs",
                            "original": "3 eggs",
                            "originalName": "eggs",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/egg.png"
                        },
                        {
                            "id": 1077,
                            "amount": 1.5,
                            "unit": "cups",
                            "unitLong": "cups",
                            "unitShort": "cup",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "milk",
                            "original": "1 1/2 cups milk (scald)",
                            "originalName": "milk (scald)",
                            "meta": [
                                "(scald)"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/milk.png"
                        }
                    ],
                    "unusedIngredients": [],
                    "likes": 1
                },
                {
                    "id": 636372,
                    "title": "Bubble-Top Brioches",
                    "image": "https://spoonacular.com/recipeImages/636372-312x231.jpg",
                    "imageType": "jpg",
                    "usedIngredientCount": 4,
                    "missedIngredientCount": 0,
                    "missedIngredients": [],
                    "usedIngredients": [
                        {
                            "id": 18375,
                            "amount": 3.0,
                            "unit": "teaspoons",
                            "unitLong": "teaspoons",
                            "unitShort": "tsp",
                            "aisle": "Baking",
                            "name": "active yeast",
                            "original": "3 teaspoons active dry yeast (measured from two ¼-ounce envelopes)",
                            "originalName": "active dry yeast (measured from two ¼-ounce envelopes)",
                            "meta": [
                                "dry",
                                "(measured from two)"
                            ],
                            "extendedName": "dry active yeast",
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/yeast-granules.jpg"
                        },
                        {
                            "id": 1123,
                            "amount": 1.0,
                            "unit": "teaspoon",
                            "unitLong": "teaspoon",
                            "unitShort": "tsp",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "egg",
                            "original": "1 teaspoon large egg beaten to blend with 1 teaspoon water (for glaze)",
                            "originalName": "egg beaten to blend with 1 teaspoon water (for glaze)",
                            "meta": [
                                "with 1 teaspoon water (for glaze)",
                                "beaten to blend"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/egg.png"
                        },
                        {
                            "id": 1077,
                            "amount": 0.25,
                            "unit": "cup",
                            "unitLong": "cups",
                            "unitShort": "cup",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "milk",
                            "original": "1/4 cup warm whole milk (110°F to 115°F)",
                            "originalName": "warm whole milk (110°F to 115°F)",
                            "meta": [
                                "whole",
                                "(110°F to 115°F)"
                            ],
                            "extendedName": "whole milk",
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/milk.png"
                        },
                        {
                            "id": 1145,
                            "amount": 12.0,
                            "unit": "tablespoons",
                            "unitLong": "tablespoons",
                            "unitShort": "Tbsp",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "unsalted butter",
                            "original": "12 tablespoons (1 ½ sticks) unsalted butter, room temperature",
                            "originalName": "(1 ½ sticks) unsalted butter, room temperature",
                            "meta": [
                                "unsalted",
                                "room temperature",
                                "()"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg"
                        }
                    ],
                    "unusedIngredients": [],
                    "likes": 1
                },
                {
                    "id": 647204,
                    "title": "Honey Crescents",
                    "image": "https://spoonacular.com/recipeImages/647204-312x231.jpg",
                    "imageType": "jpg",
                    "usedIngredientCount": 4,
                    "missedIngredientCount": 1,
                    "missedIngredients": [
                        {
                            "id": 19296,
                            "amount": 2.0,
                            "unit": "tablespoons",
                            "unitLong": "tablespoons",
                            "unitShort": "Tbsp",
                            "aisle": "Nut butters, Jams, and Honey",
                            "name": "honey",
                            "original": "2 tablespoons honey",
                            "originalName": "honey",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/honey.png"
                        }
                    ],
                    "usedIngredients": [
                        {
                            "id": 18375,
                            "amount": 1.0,
                            "unit": "",
                            "unitLong": "",
                            "unitShort": "",
                            "aisle": "Baking",
                            "name": "yeast",
                            "original": "1 sachet dry yeast (7 gr)",
                            "originalName": "sachet dry yeast (7 gr)",
                            "meta": [
                                "dry",
                                "(7 gr)"
                            ],
                            "extendedName": "dry yeast",
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/yeast-granules.jpg"
                        },
                        {
                            "id": 1077,
                            "amount": 250.0,
                            "unit": "mls",
                            "unitLong": "mls",
                            "unitShort": "mls",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "milk",
                            "original": "250 mls lukewarm milk",
                            "originalName": "lukewarm milk",
                            "meta": [
                                "lukewarm"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/milk.png"
                        },
                        {
                            "id": 1001,
                            "amount": 2.0,
                            "unit": "tablespoons",
                            "unitLong": "tablespoons",
                            "unitShort": "Tbsp",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "butter",
                            "original": "2 tablespoons butter",
                            "originalName": "butter",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg"
                        },
                        {
                            "id": 1123,
                            "amount": 1.0,
                            "unit": "",
                            "unitLong": "",
                            "unitShort": "",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "egg",
                            "original": "1 egg for brushing",
                            "originalName": "egg for brushing",
                            "meta": [
                                "for brushing"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/egg.png"
                        }
                    ],
                    "unusedIngredients": [],
                    "likes": 1
                },
                {
                    "id": 636134,
                    "title": "Brioche Rolls",
                    "image": "https://spoonacular.com/recipeImages/636134-312x231.jpg",
                    "imageType": "jpg",
                    "usedIngredientCount": 4,
                    "missedIngredientCount": 1,
                    "missedIngredients": [
                        {
                            "id": 10120129,
                            "amount": 4.0,
                            "unit": "cups",
                            "unitLong": "cups",
                            "unitShort": "cup",
                            "aisle": "Baking",
                            "name": "bread flour",
                            "original": "4 cups bread flour",
                            "originalName": "bread flour",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/flour.png"
                        }
                    ],
                    "usedIngredients": [
                        {
                            "id": 1001,
                            "amount": 120.0,
                            "unit": "g",
                            "unitLong": "grams",
                            "unitShort": "g",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "butter",
                            "original": "120g butter, at room temperature plus more for greasing and topping",
                            "originalName": "butter, at room temperature plus more for greasing and topping",
                            "meta": [
                                "plus more for greasing and topping",
                                "at room temperature"
                            ],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg"
                        },
                        {
                            "id": 1123,
                            "amount": 2.0,
                            "unit": "",
                            "unitLong": "",
                            "unitShort": "",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "eggs",
                            "original": "2 1/2 eggs",
                            "originalName": "1/2 eggs",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/egg.png"
                        },
                        {
                            "id": 1077,
                            "amount": 1.0,
                            "unit": "cups",
                            "unitLong": "cup",
                            "unitShort": "cup",
                            "aisle": "Milk, Eggs, Other Dairy",
                            "name": "milk",
                            "original": "cups milk",
                            "originalName": "milk",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/milk.png"
                        },
                        {
                            "id": 18375,
                            "amount": 2.5,
                            "unit": "teaspoons",
                            "unitLong": "teaspoons",
                            "unitShort": "tsp",
                            "aisle": "Baking",
                            "name": "yeast",
                            "original": "2 1/2 teaspoons yeast",
                            "originalName": "yeast",
                            "meta": [],
                            "image": "https://spoonacular.com/cdn/ingredients_100x100/yeast-granules.jpg"
                        }
                    ],
                    "unusedIngredients": [],
                    "likes": 1
                }
                ]
            },
            methods: {
                updateMessage() {
                    this.rows = "";
                    this.getRecipes().forEach((i) => {
                        this.addRow(i);
                    })
                    this.addEventListener();
                },
                addRow(object) {
                    // recipeNumber++;
                    let r = "<tr>";
                    r += "<td>";
                    r += String(object.title);
                    let imgSrc = object.image;
                    r += "<img src=\"" + imgSrc + "\" />";
                    let recID = object.id;
                    this.recipeNumber.push(recID);
                    r += "</td><td><button ";
                    r += "id=" + String(recID);
                    r += ">Go to</button></td></tr>"; 
                    this.rows += r;
                },
                getRecipes() {
                    return this.recipesReturned;

                },
                addEventListener() {
                    const that = this;
                    // TODO This will be buggy
                    window.addEventListener("click" , () =>{ 
                        that.recipeNumber.forEach((i) => {
                            document.getElementById(i).addEventListener("click", ()  => {
                                let recID = String(i);
                                sessionStorage.setItem("LoadRecipe", recID);
                                window.location.href = "SelectedRecipe.html";
                                // TODO Call server localhost:8080/routes/recipes/id with {id: recID}
                            })
                        }) 
                    })
                }
            },
            beforeMount() {
                // this.addRow(sessionStorage.getItem("Returned Recipes")[0])
                this.addRow(this.getRecipes()[0]);
            }
        })
    </script>
</body>

</html>